---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: post,
  }));
}

const post = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title} description={post.data.description}>
    <article class="max-w-3xl mx-auto px-4 py-12">
        <div class="text-center mb-12">
            <span class="text-blue-600 font-bold tracking-wide uppercase text-sm">{post.data.tags[0]}</span>
            <h1 class="text-3xl md:text-5xl font-extrabold text-slate-900 mt-2 mb-4 leading-tight">{post.data.title}</h1>
            <p class="text-slate-500">By {post.data.author} · Published on {post.data.pubDate}</p>
        </div>
        
        {post.data.image && (
            <img src={post.data.image} alt={post.data.title} class="w-full h-[400px] object-cover rounded-xl shadow-lg mb-10" />
        )}

        <div class="prose prose-lg prose-slate max-w-none prose-headings:font-bold prose-a:text-blue-600 hover:prose-a:text-blue-500">
            <Content />
        </div>
        
        <div class="mt-12 pt-8 border-t border-gray-200">
            <a href="/blog" class="text-blue-600 font-bold hover:underline">← Back to Blog</a>
        </div>
    </article>
</Layout>